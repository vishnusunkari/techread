{"componentChunkName":"component---src-templates-docs-js","path":"/concepts/04-save-queue-data-on-to-disk","result":{"data":{"site":{"siteMetadata":{"title":"TechGry","docsLocation":""}},"mdx":{"fields":{"id":"c432527e-05bd-503d-84f5-b31f43aaebef","title":"Saving Queue Data on to Disk","slug":"/concepts/04-save-queue-data-on-to-disk"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Saving Queue Data on to Disk\",\n  \"metaTitle\": \"How to save data of your queues on to disk instead of in-memory in Python ?\",\n  \"metaDescription\": \"How to save data of your queues on to disk instead of in-memory in Python ? How to persist queues on to disk ? How to save queue data on to temporary file or database on disk ?\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h3\", null, \"Saving data of your queues on to disk instead of in-memory in Python\"), mdx(\"p\", null, \"In your python program you might need to save the data of your queues on to disk. One use case can be\\nlets say you are streaming location data of a device to a server and when the network is poor or signal\\nis weak, the device location data cannot be uploaded to server thus causing the location data to be lost.\\nIn such cases you can save the location data onto disk of your client device with status as unacknowledged\\nand when the connection is re-established you can send the unacknowledged data back to the server.     \"), mdx(\"p\", null, \"One of the python libraries that helps to achieve this is persist-queue, a thread-safe disk based persistent queue.        \"), mdx(\"p\", null, \"persist-queue implements a file-based queue and a serial of sqlite3-based queues:     \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Disk-based: each queued item should be stored in disk in case of any crash.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Thread-safe: can be used by multi-threaded producers and multi-threaded consumers.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Recoverable: Items can be read after process restart.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Green-compatible: can be used in greenlet or eventlet environment.      \")), mdx(\"p\", null, \"Here is a simple python program demonstrating the usage of persist-queue library to save the queue data on to disk.     \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"import threading\\nimport time\\nfrom persistqueue import SQLiteAckQueue\\n\\n\\\"\\\"\\\"\\n    SQLiteAckQueue status\\n    inited = '0'\\n    ready = '1'\\n    unack = '2'\\n    acked = '5'\\n    ack_failed = '9'\\n\\\"\\\"\\\"\\ndef func(q: SQLiteAckQueue, thread_no):\\n    q.resume_unack_tasks()\\n    while True:\\n        task = q.get()\\n        #To acknowledge the item in the queue : status 5\\n        preId = q.ack(task)\\n        time.sleep(2)\\n        print(f'Thread #{thread_no} is doing task #{task} in the queue.')\\n\\nstate_queue = SQLiteAckQueue(\\n    \\\"../state\\\", multithreading=True, auto_commit=True\\n)\\n\\nfor i in range(4):\\n    worker = threading.Thread(target=func, args=(state_queue, i,))\\n    worker.start()\\n\\nfor j in range(10):\\n    #q.put(j)\\n    state_queue.put(j)\\n    \\n\")), mdx(\"p\", null, \"Here is how the data is persisted on the SQLite Database with and without acknowledgements where\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"status=5    (Acknowledged when preId = q.ack(task) is enabled in the above code)\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"status=2  (Unacknowledged when preId = q.ack(task) is commented in the above code)            \"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"923px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/8e26ba0f1d3ee0abda820f0fd31bdfd8/23266/queue-data-on-disk.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"56.37065637065637%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACB0lEQVQoz4WR7W/SUBSH+/9HJ6DGZI69EeNgfhEBXzKzLb4sysYHyhDLKDTQjra0tKUdFNr+PPeyCZsfbHKSm3tvn/Oc3xV0XYF+3YNmWFQ2FFWHPXbhjB3Ylg3bXpZlWRjTnuM40A0DnZ4CTVVh0HpE50PDpHsWBMd14Lo2gsDDxHcxn98gnAWYTn2MLIMXW7Nzx7HofIYoiqGYNq6HQyRxjHithIFpoPJrisOqjuynJnKnHbxvhSiKHvZPOtg+kpA/G6BCewfnDtoGAcMb6OYIUleBJElQej1uyqYQetTloAFsfbPx+G0Tj4otvK4nyJ552ChJyHzo4sVnFXm6s1NLUFdnYB+zGVI0V3IXE8/je0mSQFAIeHgJ7H63kHrXRKb8GwUxRq46wdNKG88/ytg61fCG7uxdLCDeAt1gCpnMurIM3w/uAwt0eYcBi02kS0vg/g8PmYqEZwTcPFZ503WgF0boDjSM6SHuYBwoaxoKNM721xGeFC+RKrWQr0fInQcEbHPgyxPtH+CcHmYWhljM539hHNju95EXEwKa3JADmeHPCdJliVtyQ2q6V1ugod1mSD/ffcnaWrjqD1ZAyjBNGTLDV7UZN2QRcMOHwHhldW9kZlhorAwZIM8fxed2rMF6huvAh3bccDkykP1iUoZsZGZII1cDpMoSH3vzeJnz7kUE8T/AP87fF4gbZ3WJAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Queue data on SQLite DB\",\n    \"title\": \"Queue data on SQLite DB\",\n    \"src\": \"/static/8e26ba0f1d3ee0abda820f0fd31bdfd8/23266/queue-data-on-disk.png\",\n    \"srcSet\": [\"/static/8e26ba0f1d3ee0abda820f0fd31bdfd8/a2ead/queue-data-on-disk.png 259w\", \"/static/8e26ba0f1d3ee0abda820f0fd31bdfd8/6b9fd/queue-data-on-disk.png 518w\", \"/static/8e26ba0f1d3ee0abda820f0fd31bdfd8/23266/queue-data-on-disk.png 923w\"],\n    \"sizes\": \"(max-width: 923px) 100vw, 923px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \"), \"     \"));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#saving-data-of-your-queues-on-to-disk-instead-of-in-memory-in-python","title":"Saving data of your queues on to disk instead of in-memory in Python"}]},"parent":{"__typename":"File","relativePath":"concepts/04-save-queue-data-on-to-disk.mdx"},"frontmatter":{"metaTitle":"How to save data of your queues on to disk instead of in-memory in Python ?","metaDescription":"How to save data of your queues on to disk instead of in-memory in Python ? How to persist queues on to disk ? How to save queue data on to temporary file or database on disk ?"}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/concepts","title":"RealWorld Concepts"}}},{"node":{"fields":{"slug":"/java","title":"Java"}}},{"node":{"fields":{"slug":"/aws","title":"AWS"}}},{"node":{"fields":{"slug":"/kafka","title":"Kafka Concepts"}}},{"node":{"fields":{"slug":"/kubernetes","title":"Kubernetes Concepts"}}},{"node":{"fields":{"slug":"/pages/about","title":"About TechGry"}}},{"node":{"fields":{"slug":"/pages/terms-and-conditions","title":"Terms and Conditions"}}},{"node":{"fields":{"slug":"/pages/disclaimer","title":"Disclaimer"}}},{"node":{"fields":{"slug":"/kafka/00-what-is-kafka","title":"What is Kafka"}}},{"node":{"fields":{"slug":"/pages/privacypolicy","title":"Privacy Policy"}}},{"node":{"fields":{"slug":"/kafka/02-kafka-brokers","title":"Brokers"}}},{"node":{"fields":{"slug":"/kubernetes/01-more-pods-on-nodes","title":"How to deploy more pods on kubernetes nodes"}}},{"node":{"fields":{"slug":"/kafka/03-kafka-producers","title":"Producers"}}},{"node":{"fields":{"slug":"/kafka/04-kafka-consumers","title":"Kafka Consumers"}}},{"node":{"fields":{"slug":"/kafka/01-kafka-topics-partitions-offsets","title":"Topics,Partitions & Offsets"}}},{"node":{"fields":{"slug":"/kafka/05-kafka-consumer-offsets-delivery","title":"Consumer Offsets and Delivery Semantics"}}},{"node":{"fields":{"slug":"/kafka/09-kafka-how-to-build-distributed-scalable-system","title":"How to build distributed scalable system with Kafka"}}},{"node":{"fields":{"slug":"/kafka/07-kafka-guarantees","title":"Kafka Guarantees"}}},{"node":{"fields":{"slug":"/kafka/08-kafka-concepts-summary","title":"Kafka Concepts Summary"}}},{"node":{"fields":{"slug":"/java/01-java-functional-programming","title":"Functional Programming"}}},{"node":{"fields":{"slug":"/kafka/06-kafka-broker-discovery-zookeeper","title":"Kafka Broker Discovery and Zookeeper"}}},{"node":{"fields":{"slug":"/java/00-java-classloaders","title":"Java ClassLoaders"}}},{"node":{"fields":{"slug":"/concepts/00-rotation-strategy","title":"Rotate Monthly"}}},{"node":{"fields":{"slug":"/concepts/01-apis-security","title":"API Security"}}},{"node":{"fields":{"slug":"/concepts/02-maxLifetime","title":"Fix HikariPool"}}},{"node":{"fields":{"slug":"/concepts/03-access-spring-beans","title":"Spring Beans"}}},{"node":{"fields":{"slug":"/concepts/04-save-queue-data-on-to-disk","title":"Saving Queue Data on to Disk"}}},{"node":{"fields":{"slug":"/aws/01-aws-organizations","title":"AWS Organizations"}}},{"node":{"fields":{"slug":"/aws/03-aws-service-catalog","title":"AWS Service Catalog"}}},{"node":{"fields":{"slug":"/aws/04-aws-systems-manager","title":"AWS Systems Manager"}}},{"node":{"fields":{"slug":"/aws/00-aws-iam","title":"IAM"}}},{"node":{"fields":{"slug":"/aws/02-aws-config","title":"AWS Config"}}},{"node":{"fields":{"slug":"/aws/05-aws-elastic-load-balancing","title":"Elastic Load Balancing"}}},{"node":{"fields":{"slug":"/aws/06-aws-autoscaling","title":"Autoscaling"}}},{"node":{"fields":{"slug":"/aws/07-aws-placement-groups","title":"Placement Groups"}}},{"node":{"fields":{"slug":"/aws/08-aws-cloudfront","title":"CloudFront"}}},{"node":{"fields":{"slug":"/aws/09-aws-route53","title":"Route53"}}},{"node":{"fields":{"slug":"/aws/10-aws-s3","title":"S3"}}},{"node":{"fields":{"slug":"/aws/11-aws-efs","title":"EFS"}}},{"node":{"fields":{"slug":"/aws/15-aws-elasticbeanstalk","title":"Elastic Beanstalk"}}},{"node":{"fields":{"slug":"/aws/14-aws-opsworks","title":"OpsWorks"}}},{"node":{"fields":{"slug":"/aws/13-aws-cloudformation","title":"CloudFormation"}}},{"node":{"fields":{"slug":"/aws/12-aws-rdsaurora","title":"RDS Aurora"}}},{"node":{"fields":{"slug":"/security","title":"Security"}}},{"node":{"fields":{"slug":"/security/01-aws-private-ca-private-key","title":"AWS Private CA Private Key"}}},{"node":{"fields":{"slug":"/","title":"Technology Learning"}}},{"node":{"fields":{"slug":"/kubernetes/02-kubecost-integration-with-kubernetes","title":"What is Kubecost and how to integrate kubecost with kubernetes"}}},{"node":{"fields":{"slug":"/pages/about-me","title":"Vishnu Sunkari"}}},{"node":{"fields":{"slug":"/aws/16-aws-savings-plans","title":"AWS Savings Plans"}}}]}},"pageContext":{"id":"c432527e-05bd-503d-84f5-b31f43aaebef"}},"staticQueryHashes":["2619113677","2619113677","3706406642","3706406642","417421954","417421954"]}